{
  "name": "grep",
  "description": "AST-based structural search.",
  "defaults": {
    "language": "typescript",
    "format": "json"
  },
  "command": "grep",
  "args": [
    "${pattern}",
    "--json",
    "--project-path",
    "${projectPath}",
    "--language",
    "${language}"
  ],
  "outputSchema": {
    "pattern": "string - the AST pattern used",
    "language": "string - target language",
    "matches": "array - matched code with file, line, and captures",
    "totalMatches": "number - total number of matches found",
    "engineUsed": "string - ast-grep or text-fallback",
    "degraded": "boolean - true when fallback mode is used",
    "fallbackReason": "string - optional reason for fallback"
  },
  "patternExamples": [
    "function $NAME($ARGS) { $BODY } - match function declarations",
    "class $NAME { $BODY } - match class declarations",
    "import { $IMPORT } from '$MODULE' - match imports",
    "$OBJ.$METHOD($ARGS) - match method calls"
  ],
  "notes": [
    "Does not require embeddings",
    "Use $VAR for single captures and $$$VAR for zero-or-more captures",
    "Use single quotes in PowerShell to avoid $ expansion",
    "Faster and more precise than regex for code patterns",
    "Use after context --format index jump-target selection",
    "Follow with native lexical search (rg/grep) for exact string-level detail capture"
  ]
}
